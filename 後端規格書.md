# 平安符打卡系統 - 後端規格書

## 專案概述

**系統名稱**: 平安符打卡系統 API  
**後端框架**: Flask (Python)  
**資料庫**: MySQL  
**認證方式**: JWT (JSON Web Token)  
**API 風格**: RESTful API

---

## 技術架構

### 核心技術棧

- **Web 框架**: Flask 3.0+
- **ORM**: SQLAlchemy
- **資料庫**: MySQL 8.0+
- **認證**: Flask-JWT-Extended
- **跨域處理**: Flask-CORS
- **密碼加密**: Werkzeug Security

### 相依套件清單

```txt
Flask==3.0.0
Flask-SQLAlchemy==3.1.1
Flask-JWT-Extended==4.6.0
Flask-CORS==4.0.0
PyMySQL==1.1.0
python-dotenv==1.0.0
```

---

## 系統配置

### 環境變數設定 (.env)

```env
# MySQL 資料庫設定
DB_HOST=localhost
DB_PORT=3306
DB_NAME=temple_checkin
DB_USER=root
DB_PASSWORD=

# JWT 設定
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
JWT_ACCESS_TOKEN_EXPIRES=86400

# Flask 設定
FLASK_ENV=development
FLASK_DEBUG=True
```

### 應用程式配置

```python
# config.py
import os
from datetime import timedelta

class Config:
    # 資料庫設定
    SQLALCHEMY_DATABASE_URI = f"mysql+pymysql://{os.getenv('DB_USER')}:{os.getenv('DB_PASSWORD')}@{os.getenv('DB_HOST')}:{os.getenv('DB_PORT')}/{os.getenv('DB_NAME')}"
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    SQLALCHEMY_ECHO = True  # 開發環境顯示 SQL 語句
    
    # JWT 設定
    JWT_SECRET_KEY = os.getenv('JWT_SECRET_KEY')
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(seconds=int(os.getenv('JWT_ACCESS_TOKEN_EXPIRES', 86400)))
    
    # CORS 設定
    CORS_HEADERS = 'Content-Type'
```

---

## 資料庫設計

### ER 關係圖

```
Users (使用者)
  ├─ 1:N → Amulets (平安符)
  ├─ 1:N → Checkins (打卡記錄)
  
Temples (廟宇)
  └─ 1:N → Checkins (打卡記錄)
  
Amulets (平安符)
  └─ 1:N → Checkins (打卡記錄)
```

### 資料表結構

#### 1. users (使用者表)

| 欄位名稱 | 資料型別 | 說明 | 約束 |
|---------|---------|------|------|
| id | VARCHAR(36) | UUID 主鍵 | PRIMARY KEY |
| username | VARCHAR(80) | 使用者名稱 | UNIQUE, NOT NULL |
| email | VARCHAR(120) | 電子郵件 | UNIQUE, NOT NULL |
| password_hash | VARCHAR(128) | 加密密碼 | NOT NULL |
| blessing_points | INT | 祈福點數 | DEFAULT 0 |
| is_admin | BOOLEAN | 是否為管理員 | DEFAULT FALSE |
| is_active | BOOLEAN | 帳號啟用狀態 | DEFAULT TRUE |
| created_at | DATETIME | 建立時間 | DEFAULT CURRENT_TIMESTAMP |

**索引**:
- PRIMARY KEY: `id`
- UNIQUE INDEX: `username`, `email`
- INDEX: `is_active`

#### 2. amulets (平安符表)

| 欄位名稱 | 資料型別 | 說明 | 約束 |
|---------|---------|------|------|
| id | VARCHAR(36) | UUID 主鍵 | PRIMARY KEY |
| user_id | VARCHAR(36) | 使用者 ID | FOREIGN KEY → users.id |
| uid | VARCHAR(50) | NFC 卡片 UID | UNIQUE, NOT NULL |
| name | VARCHAR(100) | 平安符名稱 | NOT NULL |
| description | TEXT | 平安符描述 | NULL |
| is_active | BOOLEAN | 啟用狀態 | DEFAULT TRUE |
| created_at | DATETIME | 建立時間 | DEFAULT CURRENT_TIMESTAMP |

**索引**:
- PRIMARY KEY: `id`
- UNIQUE INDEX: `uid`
- INDEX: `user_id`, `is_active`
- FOREIGN KEY: `user_id` REFERENCES `users(id)` ON DELETE CASCADE

#### 3. temples (廟宇表)

| 欄位名稱 | 資料型別 | 說明 | 約束 |
|---------|---------|------|------|
| id | VARCHAR(36) | UUID 主鍵 | PRIMARY KEY |
| name | VARCHAR(100) | 廟宇名稱 | NOT NULL |
| address | VARCHAR(200) | 廟宇地址 | NULL |
| latitude | DECIMAL(10,8) | 緯度 | NULL |
| longitude | DECIMAL(11,8) | 經度 | NULL |
| main_deity | VARCHAR(50) | 主祀神明 | NULL |
| description | TEXT | 廟宇描述 | NULL |
| nfc_uid | VARCHAR(50) | NFC 標籤 UID | UNIQUE, NULL |
| is_active | BOOLEAN | 啟用狀態 | DEFAULT TRUE |
| created_at | DATETIME | 建立時間 | DEFAULT CURRENT_TIMESTAMP |

**索引**:
- PRIMARY KEY: `id`
- UNIQUE INDEX: `nfc_uid`
- INDEX: `is_active`, `name`
- SPATIAL INDEX: `latitude`, `longitude` (用於地理位置查詢)

#### 4. checkins (打卡記錄表)

| 欄位名稱 | 資料型別 | 說明 | 約束 |
|---------|---------|------|------|
| id | VARCHAR(36) | UUID 主鍵 | PRIMARY KEY |
| user_id | VARCHAR(36) | 使用者 ID | FOREIGN KEY → users.id |
| temple_id | VARCHAR(36) | 廟宇 ID | FOREIGN KEY → temples.id |
| amulet_id | VARCHAR(36) | 平安符 ID | FOREIGN KEY → amulets.id |
| checkin_time | DATETIME | 打卡時間 | DEFAULT CURRENT_TIMESTAMP |
| blessing_points | INT | 獲得點數 | NOT NULL |
| latitude | DECIMAL(10,8) | 打卡緯度 | NULL |
| longitude | DECIMAL(11,8) | 打卡經度 | NULL |
| notes | TEXT | 打卡備註 | NULL |

**索引**:
- PRIMARY KEY: `id`
- INDEX: `user_id`, `temple_id`, `checkin_time`
- FOREIGN KEY: 
  - `user_id` REFERENCES `users(id)` ON DELETE CASCADE
  - `temple_id` REFERENCES `temples(id)` ON DELETE CASCADE
  - `amulet_id` REFERENCES `amulets(id)` ON DELETE CASCADE

---

## API 端點規格

### 基礎資訊

**Base URL**: `http://localhost:5000`  
**Content-Type**: `application/json`  
**認證方式**: Bearer Token (JWT)

### 通用回應格式

#### 成功回應
```json
{
  "success": true,
  "message": "操作訊息",
  "data": { /* 回應資料 */ }
}
```

#### 錯誤回應
```json
{
  "success": false,
  "error": "錯誤訊息"
}
```

### HTTP 狀態碼

- `200 OK`: 請求成功
- `201 Created`: 資源建立成功
- `400 Bad Request`: 請求參數錯誤
- `401 Unauthorized`: 未授權或 Token 無效
- `403 Forbidden`: 權限不足
- `404 Not Found`: 資源不存在
- `500 Internal Server Error`: 伺服器錯誤

---

## API 端點詳細規格

### 1. 系統資訊類

#### 1.1 取得系統資訊
```
GET /
```

**說明**: 取得 API 基本資訊和可用端點

**認證**: 不需要

**回應範例**:
```json
{
  "success": true,
  "data": {
    "name": "平安符打卡系統 API (MySQL 版)",
    "version": "1.0.0",
    "status": "running",
    "database": "connected",
    "test_accounts": {
      "user": "test@example.com / password123",
      "admin": "admin@example.com / admin123"
    },
    "endpoints": {
      "auth": "/api/auth",
      "temples": "/api/temples",
      "checkin": "/api/checkin"
    }
  }
}
```

#### 1.2 健康檢查
```
GET /health
```

**說明**: 檢查系統健康狀態

**認證**: 不需要

**回應範例**:
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "database": "connected",
    "database_type": "MySQL (XAMPP)",
    "timestamp": "2025-01-15T10:30:00",
    "statistics": {
      "total_users": 150,
      "active_temples": 25,
      "total_checkins": 1234
    }
  }
}
```

---

### 2. 認證類 API

#### 2.1 使用者註冊
```
POST /api/auth/register
```

**說明**: 註冊新使用者帳號

**認證**: 不需要

**請求參數**:
```json
{
  "username": "string (必填, 3-80字元)",
  "email": "string (必填, 有效的 email 格式)",
  "password": "string (必填, 最少6字元)"
}
```

**回應範例**:
```json
{
  "success": true,
  "message": "註冊成功",
  "data": {
    "user": {
      "id": "uuid",
      "username": "test_user",
      "email": "test@example.com",
      "blessing_points": 0,
      "is_admin": false,
      "is_active": true,
      "created_at": "2025-01-15T10:30:00"
    },
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc..."
  }
}
```

**錯誤回應**:
- `400`: 缺少必要欄位
- `400`: 使用者名稱或 Email 已存在
- `400`: 密碼長度不足

#### 2.2 使用者登入
```
POST /api/auth/login
```

**說明**: 使用者登入取得 JWT Token

**認證**: 不需要

**請求參數**:
```json
{
  "email": "string (必填)",
  "password": "string (必填)"
}
```

**回應範例**:
```json
{
  "success": true,
  "message": "登入成功",
  "data": {
    "user": {
      "id": "uuid",
      "username": "test_user",
      "email": "test@example.com",
      "blessing_points": 100,
      "is_admin": false,
      "is_active": true
    },
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc..."
  }
}
```

**錯誤回應**:
- `400`: 缺少 email 或 password
- `401`: Email 或密碼錯誤
- `403`: 帳號已被停用

#### 2.3 取得當前使用者資訊
```
GET /api/auth/me
```

**說明**: 取得當前登入使用者的詳細資訊

**認證**: 需要 (Bearer Token)

**Headers**:
```
Authorization: Bearer <access_token>
```

**回應範例**:
```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "username": "test_user",
      "email": "test@example.com",
      "blessing_points": 100,
      "is_admin": false,
      "is_active": true,
      "created_at": "2025-01-15T10:30:00"
    },
    "amulets": [
      {
        "id": "uuid",
        "uid": "04A1B2C3D4E5F6",
        "name": "我的平安符",
        "description": "龍山寺求得",
        "is_active": true,
        "created_at": "2025-01-15T10:30:00"
      }
    ]
  }
}
```

**錯誤回應**:
- `401`: Token 無效或過期
- `404`: 使用者不存在

---

### 3. 廟宇類 API

#### 3.1 取得廟宇列表
```
GET /api/temples
```

**說明**: 取得所有啟用中的廟宇列表

**認證**: 不需要

**查詢參數** (可選):
- `page`: 頁碼 (預設: 1)
- `per_page`: 每頁筆數 (預設: 20)
- `search`: 搜尋關鍵字 (廟宇名稱或主祀神明)

**回應範例**:
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "龍山寺",
      "address": "台北市萬華區廣州街211號",
      "latitude": 25.036889,
      "longitude": 121.499722,
      "main_deity": "觀音菩薩",
      "description": "艋舺龍山寺創建於清乾隆3年...",
      "nfc_uid": "04A1B2C3D4E5F6",
      "is_active": true,
      "created_at": "2025-01-15T10:30:00"
    }
  ]
}
```

#### 3.2 取得廟宇詳細資訊
```
GET /api/temples/<temple_id>
```

**說明**: 取得特定廟宇的詳細資訊

**認證**: 不需要

**路徑參數**:
- `temple_id`: 廟宇 UUID

**回應範例**:
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "name": "龍山寺",
    "address": "台北市萬華區廣州街211號",
    "latitude": 25.036889,
    "longitude": 121.499722,
    "main_deity": "觀音菩薩",
    "description": "詳細描述...",
    "nfc_uid": "04A1B2C3D4E5F6",
    "is_active": true,
    "created_at": "2025-01-15T10:30:00"
  }
}
```

**錯誤回應**:
- `404`: 廟宇不存在或已停用

#### 3.3 取得附近廟宇
```
GET /api/temples/nearby
```

**說明**: 根據座標取得附近的廟宇

**認證**: 不需要

**查詢參數**:
- `latitude`: 緯度 (必填)
- `longitude`: 經度 (必填)
- `radius`: 搜尋半徑(公里) (預設: 5)

**回應範例**:
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "name": "龍山寺",
      "distance": 1.2,
      "latitude": 25.036889,
      "longitude": 121.499722,
      "main_deity": "觀音菩薩"
    }
  ]
}
```

---

### 4. 平安符類 API

#### 4.1 建立平安符
```
POST /api/amulets
```

**說明**: 為當前使用者建立新的平安符

**認證**: 需要 (Bearer Token)

**請求參數**:
```json
{
  "uid": "string (必填, NFC 卡片 UID)",
  "name": "string (必填, 平安符名稱)",
  "description": "string (可選, 平安符描述)"
}
```

**回應範例**:
```json
{
  "success": true,
  "message": "平安符建立成功",
  "data": {
    "id": "uuid",
    "user_id": "uuid",
    "uid": "04A1B2C3D4E5F6",
    "name": "我的平安符",
    "description": "龍山寺求得",
    "is_active": true,
    "created_at": "2025-01-15T10:30:00"
  }
}
```

**錯誤回應**:
- `400`: 缺少必要欄位
- `400`: UID 已被使用
- `401`: 未授權

#### 4.2 取得使用者的平安符列表
```
GET /api/amulets
```

**說明**: 取得當前使用者的所有平安符

**認證**: 需要 (Bearer Token)

**回應範例**:
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "uid": "04A1B2C3D4E5F6",
      "name": "我的平安符",
      "description": "龍山寺求得",
      "is_active": true,
      "created_at": "2025-01-15T10:30:00"
    }
  ]
}
```

#### 4.3 更新平安符
```
PUT /api/amulets/<amulet_id>
```

**說明**: 更新平安符資訊

**認證**: 需要 (Bearer Token)

**請求參數**:
```json
{
  "name": "string (可選)",
  "description": "string (可選)",
  "is_active": "boolean (可選)"
}
```

**錯誤回應**:
- `404`: 平安符不存在
- `403`: 無權限修改此平安符

#### 4.4 刪除平安符
```
DELETE /api/amulets/<amulet_id>
```

**說明**: 停用平安符 (軟刪除)

**認證**: 需要 (Bearer Token)

**回應範例**:
```json
{
  "success": true,
  "message": "平安符已停用"
}
```

---

### 5. 打卡類 API

#### 5.1 建立打卡記錄
```
POST /api/checkin
```

**說明**: 建立新的廟宇打卡記錄

**認證**: 需要 (Bearer Token)

**請求參數**:
```json
{
  "temple_id": "string (必填, 廟宇 UUID)",
  "amulet_uid": "string (必填, 平安符 UID)",
  "latitude": "number (可選, 打卡緯度)",
  "longitude": "number (可選, 打卡經度)",
  "notes": "string (可選, 打卡備註)"
}
```

**商業邏輯**:
1. 驗證廟宇存在且啟用
2. 驗證平安符存在且屬於當前使用者
3. 檢查今日是否已在該廟宇打卡 (每日限一次)
4. 計算獲得點數 (基礎10點)
5. 更新使用者的祈福點數

**回應範例**:
```json
{
  "success": true,
  "message": "打卡成功",
  "data": {
    "checkin": {
      "id": "uuid",
      "user_id": "uuid",
      "temple_id": "uuid",
      "amulet_id": "uuid",
      "checkin_time": "2025-01-15T10:30:00",
      "blessing_points": 10,
      "latitude": 25.036889,
      "longitude": 121.499722,
      "notes": "虔誠祈福"
    },
    "temple": {
      "id": "uuid",
      "name": "龍山寺",
      "main_deity": "觀音菩薩"
    },
    "total_points": 110
  }
}
```

**錯誤回應**:
- `400`: 缺少必要欄位
- `400`: 今日已在此廟宇打卡
- `404`: 廟宇不存在或已停用
- `404`: 平安符不存在
- `403`: 平安符不屬於當前使用者

#### 5.2 取得打卡歷史
```
GET /api/checkin/history
```

**說明**: 取得當前使用者的打卡歷史記錄

**認證**: 需要 (Bearer Token)

**查詢參數**:
- `page`: 頁碼 (預設: 1)
- `per_page`: 每頁筆數 (預設: 20)
- `temple_id`: 篩選特定廟宇 (可選)
- `start_date`: 開始日期 YYYY-MM-DD (可選)
- `end_date`: 結束日期 YYYY-MM-DD (可選)

**回應範例**:
```json
{
  "success": true,
  "data": {
    "checkins": [
      {
        "id": "uuid",
        "temple": {
          "id": "uuid",
          "name": "龍山寺",
          "main_deity": "觀音菩薩"
        },
        "amulet": {
          "id": "uuid",
          "name": "我的平安符"
        },
        "checkin_time": "2025-01-15T10:30:00",
        "blessing_points": 10,
        "notes": "虔誠祈福"
      }
    ],
    "pagination": {
      "page": 1,
      "per_page": 20,
      "total": 50,
      "pages": 3
    }
  }
}
```

#### 5.3 取得打卡統計
```
GET /api/checkin/stats
```

**說明**: 取得使用者的打卡統計資料

**認證**: 需要 (Bearer Token)

**查詢參數**:
- `period`: 統計期間 (week/month/year) (預設: month)

**回應範例**:
```json
{
  "success": true,
  "data": {
    "total_checkins": 50,
    "total_temples": 10,
    "total_points": 500,
    "current_streak": 7,
    "longest_streak": 15,
    "checkins_by_month": [
      {
        "month": "2025-01",
        "count": 15,
        "points": 150
      }
    ],
    "top_temples": [
      {
        "temple_id": "uuid",
        "temple_name": "龍山寺",
        "visit_count": 8
      }
    ]
  }
}
```

---

### 6. 統計類 API

#### 6.1 取得使用者統計
```
GET /api/stats/user
```

**說明**: 取得當前使用者的詳細統計資訊

**認證**: 需要 (Bearer Token)

**回應範例**:
```json
{
  "success": true,
  "data": {
    "user_info": {
      "username": "test_user",
      "blessing_points": 500,
      "member_since": "2025-01-01"
    },
    "checkin_stats": {
      "total_checkins": 50,
      "unique_temples": 10,
      "current_streak": 7,
      "longest_streak": 15
    },
    "ranking": {
      "points_rank": 25,
      "checkin_rank": 18
    }
  }
}
```

#### 6.2 取得排行榜
```
GET /api/stats/leaderboard
```

**說明**: 取得祈福點數排行榜

**認證**: 不需要

**查詢參數**:
- `type`: 排行榜類型 (points/checkins) (預設: points)
- `limit`: 回傳筆數 (預設: 10, 最大: 100)

**回應範例**:
```json
{
  "success": true,
  "data": [
    {
      "rank": 1,
      "username": "user123",
      "blessing_points": 1500,
      "total_checkins": 150
    }
  ]
}
```

#### 6.3 取得廟宇排行榜
```
GET /api/stats/temples/ranking
```

**說明**: 取得最受歡迎的廟宇排行

**認證**: 不需要

**回應範例**:
```json
{
  "success": true,
  "data": [
    {
      "temple_id": "uuid",
      "temple_name": "龍山寺",
      "main_deity": "觀音菩薩",
      "visit_count": 500,
      "total_points": 5000
    }
  ]
}
```

---

### 7. 管理員 API

#### 7.1 建立廟宇
```
POST /api/admin/temples
```

**說明**: 管理員建立新廟宇

**認證**: 需要 (Bearer Token + 管理員權限)

**請求參數**:
```json
{
  "name": "string (必填)",
  "address": "string (可選)",
  "latitude": "number (可選)",
  "longitude": "number (可選)",
  "main_deity": "string (可選)",
  "description": "text (可選)",
  "nfc_uid": "string (可選)"
}
```

**回應範例**:
```json
{
  "success": true,
  "message": "廟宇建立成功",
  "data": {
    "id": "uuid",
    "name": "新廟宇",
    "created_at": "2025-01-15T10:30:00"
  }
}
```

**錯誤回應**:
- `403`: 權限不足 (非管理員)
- `400`: NFC UID 已存在

#### 7.2 更新廟宇資訊
```
PUT /api/admin/temples/<temple_id>
```

**說明**: 管理員更新廟宇資訊

**認證**: 需要 (Bearer Token + 管理員權限)

**請求參數**: 同建立廟宇

#### 7.3 刪除廟宇
```
DELETE /api/admin/temples/<temple_id>
```

**說明**: 管理員停用廟宇

**認證**: 需要 (Bearer Token + 管理員權限)

#### 7.4 取得所有使用者
```
GET /api/admin/users
```

**說明**: 管理員取得所有使用者列表

**認證**: 需要 (Bearer Token + 管理員權限)

**查詢參數**:
- `page`: 頁碼
- `per_page`: 每頁筆數
- `is_active`: 篩選啟用狀態 (true/false)

---

## 錯誤處理機制

### 錯誤碼定義

```python
ERROR_CODES = {
    'VALIDATION_ERROR': 400,
    'UNAUTHORIZED': 401,
    'FORBIDDEN': 403,
    'NOT_FOUND': 404,
    'CONFLICT': 409,
    'INTERNAL_ERROR': 500
}
```

### 錯誤回應格式

```json
{
  "success": false,
  "error": "錯誤訊息",
  "code": "ERROR_CODE",
  "details": {
    "field": "欄位名稱",
    "message": "詳細錯誤說明"
  }
}
```

---

## 安全性規範

### 1. 密碼安全
- 使用 Werkzeug 的 `generate_password_hash` 加密
- 密碼最少長度: 6 字元
- 建議生產環境要求更複雜的密碼規則

### 2. JWT Token 安全
- Token 有效期: 24 小時 (可配置)
- Token 應存放在客戶端的安全存儲 (如 HttpOnly Cookie)
- 每次請求都需驗證 Token 有效性

### 3. SQL Injection 防護
- 使用 SQLAlchemy ORM 防止 SQL 注入
- 所有使用者輸入都需要驗證和清理

### 4. CORS 設定
```python
CORS(app, resources={
    r"/api/*": {
        "origins": ["http://localhost:3000"],  # 生產環境改為實際域名
        "methods": ["GET", "POST", "PUT", "DELETE"],
        "allow_headers": ["Content-Type", "Authorization"]
    }
})
```

### 5. Rate Limiting (建議實作)
```python
from flask_limiter import Limiter

limiter = Limiter(
    app,
    key_func=lambda: request.headers.get('Authorization'),
    default_limits=["100 per hour"]
)
```

---

## 部署建議

### 開發環境
```bash
# 安裝相依套件
pip install -r requirements.txt

# 設定環境變數
cp .env.example .env

# 啟動 MySQL 資料庫 (XAMPP)

# 執行資料庫初始化腳本
mysql -u root -p temple_checkin < database_schema.sql

# 啟動 Flask 應用
python clear_app.py
```

### 生產環境
1. 使用 Gunicorn 作為 WSGI 伺服器
```bash
gunicorn -w 4 -b 0.0.0.0:5000 clear_app:app
```

2. 使用 Nginx 作為反向代理
3. 設定 SSL/TLS 憑證
4. 配置防火牆和安全組
5. 定期備份資料庫
6. 設定日誌記錄和監控

---

## 測試

### 單元測試
```python
# tests/test_auth.py
import unittest
from clear_app import app

class AuthTestCase(unittest.TestCase):
    def setUp(self):
        self.app = app.test_client()
    
    def test_register(self):
        response = self.app.post('/api/auth/register', json={
            'username': 'testuser',
            'email': 'test@example.com',
            'password': 'password123'
        })
        self.assertEqual(response.status_code, 200)
```

### API 測試工具
- Postman Collection (建議匯出一份)
- curl 指令範例
- 前端測試介面: `api_test.html`

---

## 附錄

### A. 資料庫初始化 SQL

請參考專案中的 `database_schema.sql` 檔案

### B. 測試帳號

- **一般使用者**: test@example.com / password123
- **管理員**: admin@example.com / admin123

### C. 環境變數範例

請參考 `.env.example` 檔案

### D. 常見問題

**Q: JWT Token 過期怎麼處理?**  
A: 客戶端收到 401 錯誤時,需要重新登入取得新的 Token

**Q: 如何重置使用者密碼?**  
A: 執行 CLI 指令 `python clear_app.py reset-passwords`

**Q: 如何檢查資料庫連線?**  
A: 訪問 `/health` 端點或執行 `python clear_app.py check-db`

---

## 版本紀錄

- **v1.0.0** (2025-01-15)
  - 初始版本
  - 實作基本的認證、廟宇、打卡功能
  - MySQL 資料庫整合

---

## 聯絡資訊

如有任何問題或建議,請聯繫開發團隊。
